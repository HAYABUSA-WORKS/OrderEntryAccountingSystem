# 飲食店のオーダーエントリー会計システム
## ○ 制作時期
2025年8月下旬
## ○ 使用技術
PHP　MySQL　Java　AndroidStudio(API26“Oreo” Android 8.0)　XAMPP(Apache)
## ○ 概要
最終応用課題として飲食店のオーダーエントリー会計システムを作成した。Android端末（HUAWEI JDN2-W09）を店のスタッフが所持しており、クライアント端末としてそこから無線でwebサーバにアクセスすることを想定している。webサーバではPHPを用いてDBへアクセスする。  

<img width="399" height="453" alt="image" src="https://github.com/user-attachments/assets/b7def1b7-a50e-4900-b0c8-31af6fc8b521" />
<img width="586" height="606" alt="image" src="https://github.com/user-attachments/assets/c253745b-1c82-486d-adb9-bfaf7072fdea" />

## ○ テーブル詳細
【席】seats  
| 項目名 | 型 | 説明 |
| --- | --- | --- |
| s_id | CHAR(3) PRIMARY KEY | 席番号 |
| s_capacity | INT | 収容人数 |

【食品】foods  
| 項目名 | 型 | 説明 |
| --- | --- | --- |
| f_id | CHAR(5) PRIMARY KEY | 食品番号（先頭1桁 0:飲み物 1～:食べ物） |
| f_name | VARCHAR(64) | 食品名 |
| f_price | INT | 食品価格 |

【注文基本】order_basic
| 項目名 | 型 | 説明 |
| --- | --- | --- |
| o_id | INT AUTO_INCREMENT PRIMARY KEY | 注文番号 |
| o_date | DATETIME | 注文（飲食開始）日時 |
| o_s_id | CHAR(3) | 席番号（席テーブルを参照 |
| o_state | INT NOT NULL DEFAULT 0 | 会計状態（0:未払い 1:支払い済） |

【注文詳細】order_detail
| 項目名 | 型 | 説明 |
| --- | --- | --- |
| od_id | INT AUTO_INCREMENT PRIMARY KEY | 注文詳細番号 |
| od_o_id | INT | 注文番号（注文基本テーブルを参照） |
| od_f_id | CHAR(5) | 食品番号（食品テーブルを参照） |
| od_quantity | INT | 数量 |
| od_memo | VARCHAR(64) | 備考（焼き加減、味付け、温度など） |
| od_time | DATETIME | 注文日時 |
| od_state | INT NOT NULL DEFAULT 0 | 注文状態（0:なし 1:調理中 2:調理済 3:配膳済） |

## ○ 機能
【受注・会計】
+ 店内の席一覧から空き状態を確認できる
+ 席ごとに「商品名、個数、備考」を入力して注文リストに入れることができる
+ 注文送信をすると注文済リストに注文リストの内容が反映され、状態（調理中、調理済など）を確認できる
+ 注文済リストの最終行には合計金額を表示する
+ 注文済リストの調理済の項目をタップすることで状態を配膳済に変更することができる
+ 注文済リストが全て配膳済の時、「会計」ボタンを押すことができる
+ 「会計」ボタンが押されたら席一覧が更新され、該当の席は空き状態に戻る

【厨房】
+ 全ての席の注文済リストの内容を受注食品リストとして一覧で表示することができる
+ 受注食品リストをタップすることで状態を調理済に変更することができる
+ 受注食品リストは3秒ごとに自動更新され、調理済になったものは一覧から削除される

## ○ 工夫、頑張った点
JavaからPHPに接続する際の共通した処理をNetworkインターフェースにまとめることで、コードの見通しをよくした。PHPとJava間はJSON形式でデータの受け渡しを行っている。

## ○ 改善点
アプリの中にはリストが３種類使用されているが、その元になるクラス（Bean）を使いまわすともっとコード量を減らすことができると思っている。また注文済リストの最終行に合計金額を表示する機能について、現在はリストのデータと合計金額とで別々のSQLを発行してデータを取得し、Android側で合成しているが、ひとつのSQLで一気に取得する方法も考えられる。

## ○ 感想
学習した内容を元に自分で調べたり応用したりしながら開発を進めた。PHPでPDOを用いたDBアクセスや基本的なSQL、AndroidStudioの機能としてのビューの作成、データとしてのBeanクラスなどは問題なく活用することができた。一方で特に非同期処理についてはまだまだ学習が足りていないことを感じた。
